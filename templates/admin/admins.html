{% extends 'admin/base.html' %}

{% block title %}Admins{% endblock %}
{% block page_title %}ğŸ‘¥ Admin Management{% endblock %}

{% block content %}
<div class="grid lg:grid-cols-2 gap-6">
    <!-- Add Admin Form - Only for Master Admin -->
    {% if current_is_master %}
    <div class="bg-white rounded-2xl shadow-sm p-6">
        <h3 class="text-lg font-bold text-gray-800 mb-4">â• Add New Admin</h3>
        <form method="POST" action="{{ url_for('admin_add_admin') }}" class="space-y-4">
            <div>
                <label class="block text-gray-700 font-medium mb-2">
                    ğŸ‘¤ Username *
                </label>
                <input type="text" 
                       name="username" 
                       required
                       placeholder="Enter username"
                       class="w-full px-4 py-3 border-2 border-amber-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary outline-none">
            </div>
            
            <div>
                <label class="block text-gray-700 font-medium mb-2">
                    ğŸ”’ Password *
                </label>
                <input type="password" 
                       name="password" 
                       required
                       minlength="6"
                       placeholder="Minimum 6 characters"
                       class="w-full px-4 py-3 border-2 border-amber-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary outline-none">
            </div>
            
            <button type="submit" 
                    class="w-full py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary-dark transition-all">
                âœ… Add Admin
            </button>
        </form>
    </div>
    {% else %}
    <div class="bg-white rounded-2xl shadow-sm p-6">
        <div class="text-center py-8 text-gray-500">
            <div class="text-5xl mb-4">ğŸ”’</div>
            <h3 class="font-bold text-gray-700 mb-2">Master Admin Required</h3>
            <p class="text-sm">à¤•à¥‡à¤µà¤² Master Admin à¤¹à¥€ à¤¨à¤ à¤à¤¡à¤®à¤¿à¤¨ à¤œà¥‹à¤¡à¤¼ à¤¯à¤¾ à¤¹à¤Ÿà¤¾ à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚</p>
            <p class="text-xs text-gray-400 mt-2">Only Master Admin can add or remove admins</p>
        </div>
    </div>
    {% endif %}
    
    <!-- Admins List -->
    <div class="bg-white rounded-2xl shadow-sm p-6">
        <h3 class="text-lg font-bold text-gray-800 mb-4">ğŸ“‹ All Admins</h3>
        
        {% if admins %}
        <div class="space-y-3">
            {% for admin in admins %}
            <div class="flex items-center justify-between p-4 {% if admin.is_master %}bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200{% else %}bg-gray-50{% endif %} rounded-xl">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 {% if admin.is_master %}bg-amber-500{% else %}bg-primary/10{% endif %} text-{% if admin.is_master %}white{% else %}primary{% endif %} rounded-full flex items-center justify-center font-bold">
                        {% if admin.is_master %}ğŸ‘‘{% else %}{{ admin.username[0]|upper }}{% endif %}
                    </div>
                    <div>
                        <div class="flex items-center space-x-2">
                            <p class="font-medium text-gray-800">{{ admin.username }}</p>
                            {% if admin.is_master %}
                            <span class="px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded-full">MASTER</span>
                            {% endif %}
                        </div>
                        <p class="text-xs text-gray-500">ID: #{{ admin.id }}</p>
                    </div>
                </div>
                
                {% if admin.id == session.admin_id %}
                <span class="px-3 py-1 bg-green-100 text-green-600 rounded-lg text-sm">
                    You
                </span>
                {% elif current_is_master and not admin.is_master %}
                <form action="{{ url_for('admin_delete_admin', admin_id=admin.id) }}" 
                      method="POST"
                      onsubmit="return confirm('à¤•à¥à¤¯à¤¾ à¤†à¤ª à¤µà¤¾à¤•à¤ˆ à¤‡à¤¸ à¤à¤¡à¤®à¤¿à¤¨ à¤•à¥‹ à¤¡à¤¿à¤²à¥€à¤Ÿ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚?')">
                    <button type="submit" 
                            class="px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all text-sm">
                        ğŸ—‘ï¸ Delete
                    </button>
                </form>
                {% elif admin.is_master %}
                <span class="px-3 py-1 bg-amber-100 text-amber-700 rounded-lg text-xs">
                    Protected
                </span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-8 text-gray-500">
            <div class="text-4xl mb-2">ğŸ‘¥</div>
            <p>No admins found</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
